{"version":3,"file":"ECS.test.js","sourceRoot":"","sources":["../../test/ECS.test.ts"],"names":[],"mappings":"AAAA,OAAO,CAAE,iCAAiC,CAAC,CAAA;AAE3C,OAAO,EAAE,MAAM,EAAE,MAAM,kCAAkC,CAAC;AAC1D,OAAO,EAAE,aAAa,EAAE,MAAM,yCAAyC,CAAC;AAExE,OAAO,EAAE,IAAI,EAAE,MAAM,4BAA4B,CAAC;AAIlD,MAAM,UAAW,SAAQ,MAAM;CAAG;AAClC,MAAM,WAAY,SAAQ,MAAM;CAAI;AAMpC,MAAM,IAAI;CAIT;AAKD,SAAS,wBAAwB,CAAC,IAAY,EAAE,MAAc,EAAE,MAAc;IAC1E,IAAI,QAAQ,GAAG,SAAS,GAAG,IAAI,CAAC;IAChC,OAAO;QACH,IAAI,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC9B,IAAI,CAAC,QAAQ,EAAE,CAAC;YACZ,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,IAAI,IAAI,EAAE,CAAC;QAC3C,CAAC;QACD,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;QACzC,OAAO,QAAQ,CAAC;IACpB,CAAC,CAAC;AACN,CAAC;AAGD,MAAM,aAAa;IAAnB;QACI,SAAI,GAAU,EAAE,CAAC;QACjB,WAAM,GAAU,CAAC,CAAC;QAClB,YAAO,GAAU,CAAC,CAAC;IACvB,CAAC;CAAA;AAED,MAAM,wBAAwB;IAA9B;QACI,SAAI,GAAU,EAAE,CAAC;QACjB,oBAAe,GAAc,IAAI,CAAC;IACtC,CAAC;CAAA;AAED,IAAI,CAAC,UAAU,EAAE,GAAG,EAAE;IAElB,IAAI,OAAO,GAAG,IAAI,aAAa,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC;IACtD,OAAO,CAAC,iBAAiB,CAAC,KAAK,EAAE,wBAAwB,CAAC,KAAK,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC,CAAA;IAEjF,IAAI,IAAI,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,aAAa,EAAC,wBAAwB,CAAC,CAAC;IACxE,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;IACjB,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;IAClB,IAAI,CAAC,IAAI,GAAG,OAAO,CAAA;IAEnB,IAAI,IAAI,GAAiB,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;IACjD,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;IACxB,IAAI,KAAK,GAA4B,IAAI,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC;IACxE,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;AAE5B,CAAC,CAAC,CAAC","sourcesContent":["require( \"../src/framework/core/JSExtends\")\r\n\r\nimport { Entity } from \"../src/framework/core/ECS/Entity\";\r\nimport { EntityContext } from \"../src/framework/core/ECS/EntityContext\";\r\nimport { ListNode } from \"../src/framework/core/ListNode\";\r\nimport { Vec2 } from \"../src/framework/core/Vec2\";\r\n\r\n\r\n\r\nclass UnitEntity extends Entity {}\r\nclass EventEntity extends Entity { }\r\n\r\n\r\n\r\n\r\n\r\nclass Game{\r\n\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\nfunction createVec2FieldConvertor(name: string, xField: string, yField: string): () => Vec2 {\r\n    let hideName = \"__hide_\" + name;\r\n    return function () {\r\n        let hideVec2 = this[hideName];\r\n        if (!hideVec2) {\r\n            hideVec2 = this[hideName] = new Vec2();\r\n        }\r\n        hideVec2.set(this[xField], this[yField]);\r\n        return hideVec2;\r\n    };\r\n}\r\n\r\n\r\nclass BuffComponent{\r\n    name:string = \"\";\r\n    buffID:number = 0;\r\n    skillID:number = 0;\r\n}\r\n\r\nclass EventHandleListComponent{\r\n    name:string = \"\";\r\n    eventHandleList:ListNode[] = null;\r\n}\r\n\r\ntest(\"ECS test\", () =>{\r\n\r\n    let unitCtx = new EntityContext(\"Battle\", UnitEntity);\r\n    unitCtx.regFieldConvertor(\"pos\", createVec2FieldConvertor(\"pos\", \"posX\", \"posY\"))\r\n\r\n    let unit = unitCtx.create().add(BuffComponent,EventHandleListComponent);\r\n    unit.buffID = 11;\r\n    unit.skillID = 12;\r\n    unit.name = \"hello\"\r\n   \r\n    let buff:BuffComponent = unit.get(BuffComponent);\r\n    console.log(buff.buffID)\r\n    let event:EventHandleListComponent = unit.get(EventHandleListComponent);\r\n    console.log(event.name);\r\n\r\n});"]}