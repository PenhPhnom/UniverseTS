{"version":3,"file":"StoryManager.js","sourceRoot":"","sources":["../../../../src/framework/ink/StoryManager.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,UAAU,EAAE,MAAM,sBAAsB,CAAC;AAClD,OAAO,EAAE,SAAS,EAAE,MAAM,qBAAqB,CAAC;AAChD,OAAO,EAAE,SAAS,EAAE,MAAM,aAAa,CAAC;AAExC,MAAM,OAAO,YAAa,SAAQ,SAAuB;IAKrD,IAAW,SAAS;QAChB,OAAO,IAAI,CAAC,UAAU,CAAC;IAC3B,CAAC;IAED;QACI,KAAK,EAAE,CAAC;QAPJ,iBAAY,GAAU,sBAAsB,CAAC;IAQrD,CAAC;IAEM,KAAK,CAAC,UAAU;QAEnB,IAAG,IAAI,CAAC,UAAU,IAAI,IAAI,EAAC,CAAC;YAExB,IAAI,IAAI,GAAI,CAAC,MAAM,UAAU,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,aAAa,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI,CAAC;YAC1F,IAAI,CAAC,UAAU,GAAG,IAAI,SAAS,CAAC,IAAI,CAAC,CAAC;QAC1C,CAAC;IAEL,CAAC;IAEM,UAAU,CAAC,QAAe;QAC7B,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;IACzC,CAAC;IAEM,WAAW;QACd,OAAO,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC;IACvC,CAAC;IAEM,YAAY;QACf,IAAI,CAAC,UAAU,CAAC,YAAY,EAAE,CAAC;IACnC,CAAC;IAEM,YAAY,CAAC,MAAa;QAC7B,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IAC/C,CAAC;IAEM,WAAW;QACd,IAAG,IAAI,CAAC,UAAU,IAAE,IAAI;YAAE,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;IACrD,CAAC;IAEM,WAAW,CAAC,YAAmB;QAClC,OAAO,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC;IACrD,CAAC;IAEM,WAAW,CAAC,YAAmB,EAAE,KAAS;QAC7C,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,YAAY,EAAE,KAAK,CAAC,CAAC;IACpD,CAAC;CAEJ","sourcesContent":["import { Choice } from \"inkjs/engine/Choice\";\r\nimport { ResManager } from \"../common/ResManager\";\r\nimport { Singleton } from \"../common/Singleton\";\r\nimport { InkWriter } from \"./InkWriter\";\r\n\r\nexport class StoryManager extends Singleton<StoryManager>{\r\n\r\n    private _inkWriter:InkWriter;\r\n    private storyAddress:string = \"Story/TestStory.json\";\r\n\r\n    public get inkWriter():InkWriter{\r\n        return this._inkWriter;\r\n    }\r\n\r\n    constructor(){\r\n        super();\r\n    }\r\n\r\n    public async initialize(){\r\n\r\n        if(this._inkWriter == null){\r\n\r\n            var json =  (await ResManager.Instance(ResManager).loadTextAsset(this.storyAddress)).text;\r\n            this._inkWriter = new InkWriter(json);\r\n        }\r\n\r\n    }\r\n\r\n    public beginStory(knotName:string):void{\r\n        this._inkWriter.beginStory(knotName);\r\n    }\r\n\r\n    public canContinue(){\r\n        return this._inkWriter.canContinue;\r\n    }\r\n\r\n    public advanceStory(){\r\n        this._inkWriter.advanceStory();\r\n    }\r\n\r\n    public selectChoice(choice:Choice):void{\r\n        this._inkWriter.selectChoice(choice.index);\r\n    }\r\n\r\n    public loadCurrent():void{\r\n        if(this._inkWriter!=null) this._inkWriter.load();\r\n    }\r\n\r\n    public getVariable(variableName:string):any{\r\n        return this._inkWriter.getVariable(variableName);\r\n    }\r\n\r\n    public setVariable(variableName:string, value:any){\r\n        this.inkWriter.setVariable(variableName, value);\r\n    }\r\n\r\n}"]}