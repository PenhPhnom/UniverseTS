{"version":3,"file":"GroupID.js","sourceRoot":"","sources":["../../../../../src/framework/core/ECS/GroupID.ts"],"names":[],"mappings":"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","sourcesContent":["export class GroupID {\r\n    public key: string;\r\n    private _id0: number;\r\n    private _id1: number;\r\n    private _id2: number;\r\n    constructor() {\r\n        this.reset();\r\n    }\r\n\r\n    assign(groupID: GroupID) {\r\n        this._id0 = groupID._id0;\r\n        this._id1 = groupID._id1;\r\n        this._id2=  groupID._id2;\r\n        this.key = groupID.key;\r\n        return this;\r\n    }\r\n\r\n    reset() {\r\n        this._id0 = this._id1 = this._id2= 0;\r\n        this.key = \"\";\r\n        return this;\r\n    }\r\n\r\n    equal(other: GroupID): boolean {\r\n        return this._id0 == other._id0 && this._id1 == other._id1 && this._id2== other._id2;\r\n    }\r\n\r\n    clear(pos: number) {\r\n        if (pos <= 31) {\r\n            this._id0 &= ~(1 << pos);\r\n        } else if(pos<=63){\r\n            pos -= 31;\r\n            this._id1 &= ~(1 << pos);\r\n        }\r\n        else{\r\n            pos -= 63;\r\n            this._id2 &= ~(1 << pos);\r\n        }\r\n        this.makeKey();\r\n    }\r\n\r\n    set(pos: number) {\r\n        if (pos <= 31) {\r\n            this._id0 |= (1 << pos);\r\n        } else if(pos<=63) {\r\n            pos -= 31;\r\n            this._id1 |= 1 << pos;\r\n        }\r\n        else\r\n        {\r\n            pos -= 63;\r\n            this._id2 |= 1 << pos;\r\n        }\r\n        this.makeKey();\r\n        return this;\r\n    }\r\n\r\n    hasMask(mask: GroupID): boolean {\r\n        return (this._id0 & mask._id0) == mask._id0 && (this._id1 & mask._id1) == mask._id1&& (this._id2 & mask._id2) == mask._id2;\r\n    }\r\n\r\n    has(pos: number): boolean {\r\n        if (pos <= 31) {\r\n            return !!(this._id0 & (1 << pos));\r\n        }\r\n        if (pos <= 63) {\r\n            pos -= 31;\r\n            return !!(this._id1 & (1 << pos));\r\n        }\r\n        pos -= 63;\r\n        return !!(this._id2 & (1 << pos));\r\n    }\r\n\r\n    intersection(result: GroupID, other: GroupID) {\r\n        result._id0 = this._id0 & other._id0;\r\n        result._id1 = this._id1 & other._id1;\r\n        result._id2 = this._id2 & other._id2;\r\n        result.makeKey();\r\n    }\r\n\r\n    private makeKey() {\r\n        this.key = this._id0 + \"_\" + this._id1+\"_\" + this._id2;\r\n    }\r\n}"]}