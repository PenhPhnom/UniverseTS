{"version":3,"file":"UISelServerWin.js","sourceRoot":"","sources":["../../../../../../src/game/module/login/ui/UISelServerWin.ts"],"names":[],"mappings":"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","sourcesContent":["import { FairyGUI } from \"csharp\";\r\nimport { binder } from \"../../../../framework/common/NiceDecorator\";\r\nimport { UIWindow } from \"../../../../framework/ui/UIWindow\";\r\nimport { S } from \"../../../../global/GameConfig\";\r\nimport { UIMessage } from \"../../../event/UIMessage\";\r\nimport { VoServer, VoServerItem } from \"../vo/VoServer\";\r\nimport { UIServerListItem } from \"./UIServerListItem\";\r\n\r\n\r\n\r\nexport class UISelServerWin extends UIWindow{\r\n\r\n    @binder(\"areaList\")\r\n    private areaList:FairyGUI.GList;\r\n    @binder(\"serverList\")\r\n    private serverList:FairyGUI.GList;\r\n    @binder(\"backBtn\")\r\n    private backBtn:FairyGUI.GButton;\r\n    @binder(\"okBtn\")\r\n    private okBtn:FairyGUI.GButton;\r\n    @binder(\"title\")\r\n    private title:FairyGUI.GLabel;\r\n\r\n    private  clickAreaIndex:number = 0;\r\n    private  clickServerIndex:number = 0;\r\n    private voServer:VoServer;\r\n\r\n    public onAwake():void{\r\n        super.onAwake();\r\n\r\n        this.backBtn.onClick.Add(()=>{\r\n            this.close();\r\n        });\r\n\r\n        this.okBtn.onClick.Add(()=>{\r\n            this.onSelectServer();\r\n        });\r\n\r\n        this.areaList.onClickItem.Add((event:FairyGUI.EventContext)=>{\r\n            this.clickAreaIndex = this.areaList.GetChildIndex(event.data);\r\n            \r\n            this.serverList.numItems = this.voServer.serverMap.get(this.clickAreaIndex+1).length;\r\n            this.serverList.RefreshVirtualList();\r\n        });\r\n\r\n        this.serverList.onClickItem.Add((event:FairyGUI.EventContext)=>{\r\n\r\n            this.clickServerIndex = this.serverList.GetChildIndex(event.data);\r\n\r\n            this.title.text = \"已选择服务器：\"+this.clickServerIndex;\r\n        });\r\n\r\n        let pool = [];\r\n       \r\n    }\r\n    \r\n    private onSelectServer(){\r\n\r\n        let selItem:VoServerItem = this.voServer.serverMap.get(this.clickAreaIndex+1)[this.clickServerIndex];\r\n\r\n        S.UIMessageManger.broadcast(\r\n            UIMessage.MSG_SELECT_SERVER,\r\n            selItem\r\n        );\r\n\r\n        this.close();\r\n    }\r\n\r\n\r\n    public onShow(vo:VoServer):void{\r\n        super.onShow(vo);\r\n        this.voServer = vo;\r\n\r\n        this.areaList.SetVirtual();\r\n        this.areaList.itemRenderer = (index:number, obj:FairyGUI.GObject)=>{\r\n            this.renderAreaListItem(index, obj);\r\n        };\r\n        this.areaList.numItems = vo.areaMap.size;\r\n        \r\n\r\n        this.serverList.SetVirtual();\r\n        this.serverList.itemRenderer = (index:number, obj:UIServerListItem)=>{\r\n            this.renderServerListItem(index, obj);\r\n        };\r\n        this.serverList.numItems = vo.serverMap.get(this.clickAreaIndex+1).length;\r\n    }\r\n\r\n    private renderAreaListItem(index:number, obj:FairyGUI.GObject){\r\n\r\n        let areaBtn:FairyGUI.GButton = obj.asButton;\r\n        areaBtn.text = this.voServer.areaMap.get(index+1);\r\n\r\n    }\r\n\r\n    private renderServerListItem(index:number, item:UIServerListItem){\r\n\r\n        if(item instanceof UIServerListItem){\r\n            console.log(\"1111111111111111111111\")\r\n        }else{\r\n            console.log(\"333333333333333333\")\r\n        }\r\n        item.itemLabel = this.voServer.serverMap.get(this.clickAreaIndex+1)[index].serverName;\r\n        //serverBtn.icon = FairyGUI.UIPackage.\r\n    }\r\n\r\n    public onClose(arg:any):void{\r\n        super.onClose(arg);\r\n\r\n    }\r\n\r\n\r\n}"]}